<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æˆ‘çš„åŠ¨ç”» Tier List</title>
    <link rel="stylesheet" href="my-tier-list.css" />
    <link rel="stylesheet" href="style-options.css" />
    <link rel="stylesheet" href="gradient-backgrounds.css" />
    <link rel="stylesheet" href="comments-styles.css" />
    <link rel="stylesheet" href="fix-overlap.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script src="libs/sortable/Sortable.min.js"></script>
    <script src="libs/html2canvas/html2canvas.min.js"></script>
    <script src="libs/masonry/masonry.pkgd.min.js"></script>
    <script src="libs/imagesloaded/imagesloaded.pkgd.min.js"></script>

    <!-- Markdown æ¸²æŸ“åº“ - å¤šCDNå¤‡ä»½ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
      // CDNå¤‡ä»½æœºåˆ¶
      if (typeof marked === 'undefined') {
        console.warn('ä¸»CDNåŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨CDN...');
        document.write('<script src="https://unpkg.com/marked/marked.min.js"><\/script>');
      }
    </script>
    <script>
      // æœ€ç»ˆæ£€æŸ¥
      setTimeout(() => {
        if (typeof marked === 'undefined') {
          console.error('æ‰€æœ‰CDNéƒ½åŠ è½½å¤±è´¥ï¼MarkdownåŠŸèƒ½å°†ä¸å¯ç”¨');
        } else {
          console.log('markedåº“åŠ è½½æˆåŠŸï¼Œç‰ˆæœ¬:', marked.getDefaults ? 'v4+' : 'æœªçŸ¥');
        }
      }, 100);
    </script>

    <!-- ä»£ç é«˜äº®åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" />

    <!-- Google Generative AI SDK -->
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
  </head>
  <body>
    <!-- æ¯›ç»ç’ƒæ•ˆæœå±‚ -->
    <div id="glassmorphism-layer" class="glassmorphism-layer"></div>

    <!-- è‡ªå®šä¹‰æ ‡é¢˜åŒºåŸŸ -->
    <div class="custom-title-container">
      <h1 id="custom-title" class="custom-title">æˆ‘çš„åŠ¨ç”» Tier List</h1>
      <button id="edit-title-btn" class="edit-title-btn">
        <i class="fas fa-edit"></i>
      </button>
    </div>

    <!-- ç»Ÿä¸€è®¾ç½®èœå•æŒ‰é’® -->
    <div class="settings-menu-container">
      <button id="settings-menu-btn" class="settings-menu-btn">
        <i class="fas fa-cog"></i>
      </button>

      <!-- èƒŒæ™¯è®¾ç½®æŒ‰é’® -->
      <div class="background-settings-container">
        <button id="background-settings-btn" class="background-settings-btn" title="èƒŒæ™¯ä¸ä¸»é¢˜è®¾ç½®">
          <i class="fas fa-palette"></i>
        </button>
      </div>

      <!-- è®¾ç½®èœå•é¢æ¿ -->
      <div id="settings-menu-panel" class="settings-menu-panel">
        <div class="settings-section">
          <h3 class="settings-section-title">æ˜¾ç¤ºé€‰é¡¹</h3>
          <div class="settings-option">
            <span class="settings-option-label">æ˜¾ç¤ºåŠ¨ç”»æ ‡é¢˜</span>
            <label class="toggle-switch">
              <input type="checkbox" id="title-display-toggle" checked />
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">æˆªå›¾åŠŸèƒ½</h3>
          <div class="screenshot-options">
            <button id="toggle-screenshot-mode-btn" class="export-btn">
              <i class="fas fa-camera"></i>
              <span>å¯ç”¨æˆªå›¾æ¨¡å¼</span>
            </button>

            <!-- æˆªå›¾å¸®åŠ©æŠ˜å åŒºåŸŸ -->
            <div class="screenshot-help-section">
              <button class="screenshot-help-toggle" id="screenshot-help-toggle">
                <i class="fas fa-question-circle"></i>
                <span>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span>
                <i class="fas fa-chevron-down toggle-icon"></i>
              </button>

              <div class="screenshot-help-content" id="screenshot-help-content">
                <div class="help-method">
                  <h4><i class="fas fa-desktop"></i> æ–¹æ³•ä¸€ï¼šChromeå¼€å‘è€…å·¥å…·ï¼ˆæ¨èï¼‰</h4>
                  <ol>
                    <li>å¯ç”¨æˆªå›¾æ¨¡å¼åï¼ŒæŒ‰ <kbd>F12</kbd> æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                    <li>æŒ‰ <kbd>Ctrl+Shift+P</kbd> (Windows) æˆ– <kbd>Cmd+Shift+P</kbd> (Mac) æ‰“å¼€å‘½ä»¤é¢æ¿</li>
                    <li>
                      è¾“å…¥ "screenshot" æˆ–"æˆªå›¾"ï¼Œé€‰æ‹©ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€ï¼š
                      <ul>
                        <li><strong>è‹±æ–‡ç•Œé¢ï¼š</strong> "Capture full size screenshot"</li>
                        <li><strong>ä¸­æ–‡ç•Œé¢ï¼š</strong> "æ•è·å®Œæ•´å°ºå¯¸å±å¹•æˆªå›¾"</li>
                      </ul>
                    </li>
                    <li>ç­‰å¾…æˆªå›¾å®Œæˆå¹¶è‡ªåŠ¨ä¸‹è½½</li>
                    <li>å®Œæˆåç‚¹å‡»"é€€å‡ºæˆªå›¾æ¨¡å¼"æ¢å¤æ­£å¸¸</li>
                  </ol>
                </div>

                <div class="help-method">
                  <h4><i class="fas fa-mouse-pointer"></i> æ–¹æ³•äºŒï¼šèŠ‚ç‚¹æˆªå›¾</h4>
                  <ol>
                    <li>å¯ç”¨æˆªå›¾æ¨¡å¼åï¼ŒæŒ‰ <kbd>F12</kbd> æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                    <li>åœ¨Elements/å…ƒç´ é¢æ¿ä¸­ï¼Œå³é”®ç‚¹å‡»æƒ³è¦æˆªå›¾çš„å…ƒç´ </li>
                    <li>
                      é€‰æ‹©æˆªå›¾é€‰é¡¹ï¼š
                      <ul>
                        <li><strong>è‹±æ–‡ç•Œé¢ï¼š</strong> "Capture node screenshot"</li>
                        <li><strong>ä¸­æ–‡ç•Œé¢ï¼š</strong> "æ•è·èŠ‚ç‚¹å±å¹•æˆªå›¾"</li>
                      </ul>
                    </li>
                    <li>æˆªå›¾å°†è‡ªåŠ¨ä¸‹è½½</li>
                  </ol>
                </div>

                <div class="help-method">
                  <h4><i class="fas fa-keyboard"></i> å¿«æ·é”®</h4>
                  <p>æŒ‰ <kbd>Ctrl+Alt+C</kbd> å¿«é€Ÿåˆ‡æ¢æˆªå›¾æ¨¡å¼</p>
                </div>

                <div class="help-note">
                  <p>
                    <i class="fas fa-lightbulb"></i>
                    <strong>æç¤ºï¼š</strong>æˆªå›¾æ¨¡å¼ä¼šä¸´æ—¶ä¿®å¤èƒŒæ™¯æ˜¾ç¤ºé—®é¢˜ï¼Œç¡®ä¿å®Œæ•´é¡µé¢æˆªå›¾åŒ…å«æ­£ç¡®çš„èƒŒæ™¯æ•ˆæœã€‚
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">å¯¼å‡ºä¸åˆ†äº«</h3>
          <div class="export-options">
            <button id="export-image-btn" class="export-btn">
              <i class="fas fa-image"></i>
              <span>Tieréƒ¨åˆ†å¯¼å‡ºä¸ºå›¾ç‰‡</span>
            </button>
            <button id="export-json-btn" class="export-btn">
              <i class="fas fa-file-export"></i>
              <span>å¯¼å‡ºæ•°æ®</span>
            </button>
            <button id="import-json-btn" class="export-btn">
              <i class="fas fa-file-import"></i>
              <span>å¯¼å…¥æ•°æ®</span>
            </button>
            <button id="share-link-btn" class="export-btn">
              <i class="fas fa-share-alt"></i>
              <span>ç”Ÿæˆåˆ†äº«é“¾æ¥(ä¸å¯ç”¨)</span>
            </button>
            <input type="file" id="import-file-input" accept=".json" style="display: none" />
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">AI åˆ†æ</h3>
          <div class="export-options">
            <button id="generate-taste-report-btn" class="export-btn" title="è®©AIåˆ†ææ‚¨çš„åŠ¨ç”»åå¥½">
              <i class="fas fa-brain"></i>
              <span>ç”Ÿæˆæ€»ç»“æŠ¥å‘Š</span>
            </button>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">Tierç®¡ç† <span class="settings-subtitle">(åˆ†æ•°ç»†åŒ–)</span></h3>
          <div class="tier-dropdown-list">
            <!-- è¿™é‡Œçš„å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>

      <!-- èƒŒæ™¯è®¾ç½®é¢æ¿ -->
      <div id="background-settings-panel" class="background-settings-panel">
        <div class="background-panel-header">
          <h3><i class="fas fa-palette"></i> èƒŒæ™¯ä¸ä¸»é¢˜è®¾ç½®</h3>
        </div>
        <div class="background-panel-content">
          <!-- æ¸å˜ä¸»é¢˜é€‰æ‹© -->
          <div class="background-section">
            <h4 class="background-section-title"><i class="fas fa-fill-drip"></i> æ¸å˜ä¸»é¢˜</h4>
            <div class="gradient-selection-full">
              <div class="gradient-mini-grid">
                <div
                  class="gradient-mini-preview gradient-deep-blue active"
                  data-gradient="deep-blue"
                  title="æ·±è“å¤œç©º"
                ></div>
                <div class="gradient-mini-preview gradient-aurora" data-gradient="aurora" title="æå…‰ç´«"></div>
                <div class="gradient-mini-preview gradient-sakura" data-gradient="sakura" title="æ¨±èŠ±ç²‰"></div>
                <div class="gradient-mini-preview gradient-neon" data-gradient="neon" title="éœ“è™¹å¤œæ™¯"></div>
                <div class="gradient-mini-preview gradient-ocean" data-gradient="ocean" title="æµ·æ´‹æ·±è“"></div>
                <div class="gradient-mini-preview gradient-golden" data-gradient="golden" title="é»„é‡‘æ—¶å…‰"></div>
                <div class="gradient-mini-preview gradient-emerald" data-gradient="emerald" title="ç¿¡ç¿ ç»¿é‡"></div>
                <div class="gradient-mini-preview gradient-cosmic" data-gradient="cosmic" title="å®‡å®™æ˜Ÿè¾°"></div>
                <div class="gradient-mini-preview gradient-lavender" data-gradient="lavender" title="è–°è¡£è‰"></div>
                <div class="gradient-mini-preview gradient-mystic" data-gradient="mystic" title="æ·±ç´«ç¥ç§˜"></div>
                <div class="gradient-mini-preview gradient-steel" data-gradient="steel" title="é’¢é“æœºæ¢°"></div>
                <div class="gradient-mini-preview gradient-mint" data-gradient="mint" title="è–„è·æ¸…æ–°"></div>
                <div class="gradient-mini-preview gradient-volcano" data-gradient="volcano" title="ç«å±±å²©æµ†"></div>
                <div class="gradient-mini-preview gradient-crystal" data-gradient="crystal" title="æ°´æ™¶å†°é›ª"></div>
                <div class="gradient-mini-preview gradient-spectrum" data-gradient="spectrum" title="å…‰è°±å½©è™¹"></div>
                <div class="gradient-mini-preview gradient-shadow" data-gradient="shadow" title="æš—å½±æ·±æ¸Š"></div>
                <div class="gradient-mini-preview gradient-rose-gold" data-gradient="rose-gold" title="ç«ç‘°é‡‘"></div>
                <div class="gradient-mini-preview gradient-nordic" data-gradient="nordic" title="æå…‰åŒ—æ¬§"></div>
                <div class="gradient-mini-preview gradient-cyberpunk" data-gradient="cyberpunk" title="èµ›åšæœ‹å…‹"></div>
                <div class="gradient-mini-preview gradient-sunset" data-gradient="sunset" title="å¤•é˜³è¥¿ä¸‹"></div>
              </div>

              <!-- å¿«é€Ÿä¸»é¢˜é¢„è®¾ -->
              <div class="quick-theme-buttons">
                <button
                  class="quick-theme-btn"
                  onclick="gradientController.applyPreset('anime-night')"
                  title="æå…‰ç´« + ç²’å­ + å…‰æ™•"
                >
                  <i class="fas fa-star"></i>
                  åŠ¨æ¼«ä¹‹å¤œ
                </button>
                <button
                  class="quick-theme-btn"
                  onclick="gradientController.applyPreset('cyberpunk-city')"
                  title="éœ“è™¹å¤œæ™¯ + ç²’å­"
                >
                  <i class="fas fa-robot"></i>
                  èµ›åšæœ‹å…‹
                </button>
                <button
                  class="quick-theme-btn"
                  onclick="gradientController.applyPreset('peaceful-nature')"
                  title="ç¿¡ç¿ ç»¿é‡ + å…‰æ™•"
                >
                  <i class="fas fa-leaf"></i>
                  è‡ªç„¶å®é™
                </button>
                <button
                  class="quick-theme-btn"
                  onclick="gradientController.applyPreset('minimal-focus')"
                  title="æš—å½±æ·±æ¸Š"
                >
                  <i class="fas fa-circle"></i>
                  æç®€ä¸“æ³¨
                </button>
                <button
                  class="quick-theme-btn random"
                  onclick="gradientController.randomTheme()"
                  title="éšæœºä¸»é¢˜å’Œæ•ˆæœ"
                >
                  <i class="fas fa-dice"></i>
                  éšæœºä¸»é¢˜
                </button>
              </div>
            </div>
          </div>

          <!-- è§†è§‰ç‰¹æ•ˆ -->
          <div class="background-section">
            <h4 class="background-section-title"><i class="fas fa-magic"></i> è§†è§‰ç‰¹æ•ˆ</h4>
            <div class="settings-option">
              <span class="settings-option-label">ç²’å­æ•ˆæœ</span>
              <label class="toggle-switch">
                <input type="checkbox" id="particles-effect-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="settings-option">
              <span class="settings-option-label">å…‰æ™•æ•ˆæœ</span>
              <label class="toggle-switch">
                <input type="checkbox" id="glow-effect-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <!-- è‡ªå®šä¹‰èƒŒæ™¯ -->
          <div class="background-section">
            <h4 class="background-section-title"><i class="fas fa-image"></i> è‡ªå®šä¹‰èƒŒæ™¯</h4>
            <div class="settings-option">
              <span class="settings-option-label">ä½¿ç”¨è‡ªå®šä¹‰èƒŒæ™¯</span>
              <label class="toggle-switch">
                <input type="checkbox" id="custom-bg-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="bg-upload-container" style="display: none">
              <div class="bg-preview">
                <div class="preview-placeholder">
                  <i class="fas fa-image"></i>
                  <p>èƒŒæ™¯é¢„è§ˆ</p>
                </div>
              </div>
              <div class="bg-controls">
                <label for="bg-file-input" class="bg-upload-btn">
                  <i class="fas fa-upload"></i>
                  <span>ä¸Šä¼ èƒŒæ™¯å›¾ç‰‡</span>
                </label>
                <input type="file" id="bg-file-input" accept="image/*" style="display: none" />
              </div>
              <div class="bg-effects">
                <div class="settings-option">
                  <span class="settings-option-label">æ¯›ç»ç’ƒæ•ˆæœ</span>
                  <label class="toggle-switch">
                    <input type="checkbox" id="glassmorphism-toggle" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="blur-strength">
                  <div class="blur-strength-header">
                    <span class="settings-option-label">æ¨¡ç³Šå¼ºåº¦</span>
                    <span class="blur-value">10px</span>
                  </div>
                  <input type="range" id="blur-strength" min="0" max="20" value="10" class="blur-slider" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tier-list-container">
      <!-- Tier 10 -->
      <div class="tier-row" id="tier-10">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="100, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">10</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 9.5 -->
      <div class="tier-row half-tier" id="tier-9.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="93, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">9.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 9 -->
      <div class="tier-row" id="tier-9">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="87, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">9</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 8.5 -->
      <div class="tier-row half-tier" id="tier-8.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="83, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">8.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 8 -->
      <div class="tier-row" id="tier-8">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="79, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">8</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 7.5 -->
      <div class="tier-row half-tier" id="tier-7.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="75, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">7.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 7 -->
      <div class="tier-row" id="tier-7">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="70, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">7</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 6.5 -->
      <div class="tier-row half-tier" id="tier-6.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="65, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">6.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 6 -->
      <div class="tier-row" id="tier-6">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="60, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">6</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 5.5 -->
      <div class="tier-row half-tier" id="tier-5.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="55, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">5.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 5 -->
      <div class="tier-row" id="tier-5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="50, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 4.5 -->
      <div class="tier-row half-tier" id="tier-4.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="45, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">4.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 4 -->
      <div class="tier-row" id="tier-4">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="40, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">4</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 3.5 -->
      <div class="tier-row half-tier" id="tier-3.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="35, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">3.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 3 -->
      <div class="tier-row" id="tier-3">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="30, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">3</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 2.5 -->
      <div class="tier-row half-tier" id="tier-2.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="25, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">2.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 2 -->
      <div class="tier-row" id="tier-2">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="20, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">2</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>

      <!-- Tier 1.5 -->
      <div class="tier-row half-tier" id="tier-1.5">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="15, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">1.5</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
      <!-- Tier 1 -->
      <div class="tier-row" id="tier-1">
        <div class="tier-label-container">
          <div class="tier-label">
            <svg viewBox="0 0 36 36" class="circular-chart white">
              <path
                class="circle-bg"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <path
                class="circle"
                stroke-dasharray="10, 100"
                d="M18 2.5
                              a 15.5 15.5 0 0 1 0 31
                              a 15.5 15.5 0 0 1 0 -31"
              />
              <text x="18" y="19" class="percentage">1</text>
            </svg>
          </div>
        </div>
        <div class="tier-cards">
          <div class="card"></div>
        </div>
      </div>
    </div>

    <script src="my-tier-list.js"></script>
    <script src="comments.js"></script>
    <script src="gradient-controller.js"></script>
    <script>
      // åˆå§‹åŒ–æ¸å˜æ§åˆ¶å™¨
      const gradientController = new GradientController();

      // å…³é—­èƒŒæ™¯è®¾ç½®é¢æ¿
      function closeBackgroundPanel() {
        const panel = document.getElementById('background-settings-panel');
        if (panel) {
          panel.classList.remove('active');
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function () {
        // åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
        initializeApp();
      });

      function initializeApp() {
        // TODO: åœ¨è¿™é‡Œæ·»åŠ åº”ç”¨åˆå§‹åŒ–é€»è¾‘
        // ä¾‹å¦‚: initSettingsMenu(), initBackgroundSettings(), renderTierCards() ç­‰
        // ç›®å‰ä½ å¯ä»¥å…ˆè°ƒç”¨å·²æœ‰çš„åˆå§‹åŒ–å‡½æ•°
        if (typeof initSettingsMenu === 'function') initSettingsMenu();
        if (typeof initBackgroundSettings === 'function') initBackgroundSettings();
        if (typeof renderTierCards === 'function') renderTierCards();
        // å¦‚æœ comments.js ä¸­çš„åŠŸèƒ½ä¹Ÿå¸Œæœ›åœ¨è¿™é‡Œç»Ÿä¸€åˆå§‹åŒ–ï¼Œç¡®ä¿å®ƒä»¬åœ¨å…¨å±€å¯ç”¨
        // ä¾‹å¦‚: if (typeof window.loadComments === 'function') window.loadComments();
        console.log('initializeApp function called');
      }

      // æ ·å¼åˆ‡æ¢åŠŸèƒ½
      document.addEventListener('DOMContentLoaded', function () {
        const styleButtons = document.querySelectorAll('.style-btn');
        const tierListContainer = document.querySelector('.tier-list-container');

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ ·å¼è®¾ç½®
        const savedStyle = localStorage.getItem('anime-card-style') || '1';

        // åº”ç”¨ä¿å­˜çš„æ ·å¼
        applyCardStyle(savedStyle);

        // è®¾ç½®å¯¹åº”æŒ‰é’®ä¸ºæ¿€æ´»çŠ¶æ€
        styleButtons.forEach(btn => {
          if (btn.getAttribute('data-style') === savedStyle) {
            btn.classList.add('active');
          } else {
            btn.classList.remove('active');
          }
        });

        // æ ·å¼åˆ‡æ¢äº‹ä»¶
        styleButtons.forEach(button => {
          button.addEventListener('click', function () {
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
            styleButtons.forEach(btn => btn.classList.remove('active'));
            // æ·»åŠ å½“å‰æŒ‰é’®çš„æ´»è·ƒçŠ¶æ€
            this.classList.add('active');

            const styleOption = this.getAttribute('data-style');

            // åº”ç”¨æ ·å¼å¹¶ä¿å­˜è®¾ç½®
            applyCardStyle(styleOption);
            localStorage.setItem('anime-card-style', styleOption);
          });
        });

        // åº”ç”¨å¡ç‰‡æ ·å¼
        function applyCardStyle(styleOption) {
          // é¦–å…ˆç§»é™¤æ‰€æœ‰æ ·å¼ç±»
          document.querySelectorAll('.card').forEach(card => {
            card.classList.remove('option-current', 'option-2', 'option-3', 'option-4');

            // æ ¹æ®ä¸åŒé€‰é¡¹æ·»åŠ å¯¹åº”çš„æ ·å¼ç±»
            if (styleOption === '1') {
              // é»˜è®¤æ ·å¼ - æ— æ–‡å­—
              tierListContainer.classList.add('hide-titles');
            } else if (styleOption === '2') {
              // æœ‰æ–‡å­—æ ·å¼
              tierListContainer.classList.remove('hide-titles');
              card.classList.add('option-current');
            }
          });
        }

        // èƒŒæ™¯è®¾ç½®æŒ‰é’®äº‹ä»¶
        const backgroundBtn = document.getElementById('background-settings-btn');
        const backgroundPanel = document.getElementById('background-settings-panel');

        if (backgroundBtn && backgroundPanel) {
          backgroundBtn.addEventListener('click', function () {
            backgroundPanel.classList.toggle('active');
          });
        }
      });

      // è®¾ç½®é¢æ¿æŠ˜å /å±•å¼€åŠŸèƒ½
      function toggleSettingsSection(headerElement) {
        const section = headerElement.parentElement;
        section.classList.toggle('active');
      }

      // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èƒŒæ™¯è®¾ç½®é¢æ¿
      document.addEventListener('click', function (event) {
        const backgroundBtn = document.getElementById('background-settings-btn');
        const backgroundPanel = document.getElementById('background-settings-panel');

        if (
          backgroundBtn &&
          backgroundPanel &&
          !backgroundBtn.contains(event.target) &&
          !backgroundPanel.contains(event.target)
        ) {
          backgroundPanel.classList.remove('active');
        }
      });
    </script>

    <!-- Tagåˆ†æåŒºåŸŸ -->
    <div class="tag-cloud-section">
      <div class="section-title-container">
        <h2 class="section-title">Tagåˆ†æ</h2>
        <button id="load-tag-cloud-btn" class="load-tag-cloud-btn">
          <i class="fas fa-tags"></i>
          <span>åŠ è½½Tag</span>
        </button>
        <span class="tag-cloud-note">æ³¨æ„ï¼šæ–°æ·»åŠ åŠ¨ç”»åè¯·é‡æ–°ç‚¹å‡»åŠ è½½Tag</span>
      </div>
      <div class="tag-cloud-wrapper">
        <div id="main-tag-cloud-container" class="main-tag-cloud-container">
          <!-- æ ‡ç­¾äº‘å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
          <div class="tag-cloud-placeholder">
            <p>æŸ¥çœ‹æ‚¨æ·»åŠ çš„åŠ¨ç”»ä¸­æœ€å¸¸è§çš„æ ‡ç­¾</p>
          </div>
        </div>
      </div>
    </div>

    <!-- è¯„è®ºåŒºæ ‡é¢˜ -->
    <div class="comments-section">
      <h2 class="comments-section-title">æˆ‘çš„è¯„è®º</h2>

      <!-- è¯„è®ºå¡ç‰‡å®¹å™¨ -->
      <div class="comments-container">
        <!-- è¯„è®ºå°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>

    <!-- APIå¯†é’¥è®¾ç½®åŒºåŸŸ -->
    <div class="api-key-standalone-section">
      <div class="api-key-header">
        <h3><i class="fas fa-key"></i> Gemini API å¯†é’¥è®¾ç½®</h3>
        <div class="api-key-status" id="api-key-status">
          <span class="status-indicator" id="status-indicator">
            <i class="fas fa-times-circle"></i>
          </span>
          <span class="status-text" id="status-text">æœªè®¾ç½®</span>
        </div>
      </div>

      <div class="api-key-content">
        <p class="api-key-description">è®¾ç½® Gemini API å¯†é’¥ä»¥å¯ç”¨AIåŠŸèƒ½</p>
        <div class="api-key-security-notice">
          <i class="fas fa-shield-alt"></i>
          <span
            style="cursor: help"
            title="ä»¥ä¸Šæ˜¯AIçš„å®˜æ–¹è¯´è¾ï¼Œæ¥è‡ªä¸€ä¸ªä½¿ç”¨promptå½“ç¼–ç¨‹è¯­è¨€çš„å¼€å‘è€…,æˆ‘ä¹Ÿçœ‹ä¸æ‡‚ä»£ç XD,ä¸è¿‡æˆ‘æ‹·æ‰“äº†AI,æœ‰è®©å®ƒå‘æ¯’èª“,å¤§æ¦‚ç‡æ²¡é—®é¢˜^^"
          >
            æ‚¨çš„APIå¯†é’¥ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</span
          >
        </div>

        <div class="api-key-input-group">
          <input
            type="password"
            id="main-gemini-api-key"
            class="api-key-input"
            placeholder="è¯·è¾“å…¥æ‚¨çš„ Gemini API å¯†é’¥"
          />
          <button type="button" id="main-toggle-api-key-visibility" class="toggle-visibility-btn" title="æ˜¾ç¤º/éšè—å¯†é’¥">
            <i class="fas fa-eye"></i>
          </button>
        </div>

        <div class="model-selection-group">
          <label for="main-model-select" class="model-label"> <i class="fas fa-brain"></i> AIæ¨¡å‹ </label>
          <select id="main-model-select" class="model-select">
            <option value="gemini-2.5-flash-preview-05-20">gemini-2.5-flash-preview-05-20</option>
            <option value="gemini-2.5-flash-preview-04-17">gemini-2.5-flash-preview-04-17</option>
            <option value="gemini-2.0-flash-exp">gemini-2.0-flash-exp</option>
            <option value="gemini-2.5-pro-preview-05-06">gemini-2.5-pro-preview-05-06 (ä»˜è´¹KEYç”¨)</option>
            <option value="custom">è‡ªå®šä¹‰æ¨¡å‹</option>
          </select>
        </div>

        <div class="custom-model-group" id="custom-model-group" style="display: none">
          <label for="custom-model-input" class="model-label"> <i class="fas fa-edit"></i> è‡ªå®šä¹‰æ¨¡å‹ </label>
          <input type="text" id="custom-model-input" class="api-key-input" placeholder="å¦‚ï¼šgemini-pro-preview-05-06" />
        </div>

        <div class="api-key-actions">
          <button id="main-save-api-key-btn" class="api-key-btn primary">
            <i class="fas fa-save"></i>
            <span>ä¿å­˜</span>
          </button>
          <button id="main-test-api-key-btn" class="api-key-btn secondary" style="display: none">
            <i class="fas fa-vial"></i>
            <span>æµ‹è¯•è¿æ¥</span>
          </button>
          <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-key-btn secondary">
            <i class="fas fa-external-link-alt"></i>
            <span>è·å–å¯†é’¥</span>
          </a>
        </div>

        <div class="api-key-help">
          <details>
            <summary><i class="fas fa-question-circle"></i> å¦‚ä½•è·å–ï¼Ÿ</summary>
            <ol>
              <li>ç‚¹å‡»"è·å–å¯†é’¥"é“¾æ¥</li>
              <li>ä½¿ç”¨Googleè´¦å·ç™»å½•</li>
              <li>åˆ›å»ºAPI Key</li>
              <li>å¤åˆ¶å¹¶ç²˜è´´åˆ°è¾“å…¥æ¡†</li>
              <li>ç‚¹å‡»"ä¿å­˜"å®Œæˆè®¾ç½®</li>
            </ol>
          </details>
        </div>
      </div>
    </div>

    <!-- AIæ€»ç»“æŠ¥å‘ŠåŒºåŸŸ - å…¨æ–°Glassmorphismè®¾è®¡ -->
    <div class="taste-report-standalone-section" id="main-taste-report-section" style="display: none">
      <div class="taste-report-header">
        <!-- æ ‡é¢˜è¡Œ -->
        <div class="taste-report-title-row">
          <h3><i class="fas fa-brain"></i> AIæ€»ç»“æŠ¥å‘Š</h3>
          <div class="role-selector-container">
            <label for="role-select" class="role-select-label"><i class="fas fa-user-astronaut"></i> é€‰æ‹©AIè§’è‰²:</label>
            <select id="role-select" class="role-select">
              <!-- Options will be populated by JavaScript -->
            </select>
          </div>
        </div>

        <!-- æ§åˆ¶æŒ‰é’®è¡Œ -->
        <div class="taste-report-controls">
          <button id="main-generate-taste-report-btn" class="taste-report-btn primary">
            <i class="fas fa-magic"></i>
            <span>ç”Ÿæˆæ€»ç»“æŠ¥å‘Š</span>
          </button>
          <!-- éšè—æŸ¥çœ‹å®Œæ•´PromptåŠŸèƒ½ -->
          <!--
          <button id="main-view-prompt-btn" class="taste-report-btn secondary" style="display: none">
            <i class="fas fa-code"></i>
            <span>æŸ¥çœ‹å®Œæ•´Prompt</span>
          </button>
          -->
          <button
            id="clear-cache-btn"
            class="taste-report-btn secondary"
            title="æ¸…ç†åŠ¨ç”»æ•°æ®ç¼“å­˜ï¼Œä¸‹æ¬¡ç”Ÿæˆæ—¶é‡æ–°è·å–æœ€æ–°æ•°æ®"
          >
            <i class="fas fa-trash-alt"></i>
            <span>æ¸…ç†ç¼“å­˜</span>
          </button>
        </div>
      </div>

      <div class="taste-report-content" id="main-taste-report-content">
        <!-- AIè§’è‰²Banner -->
        <div class="ai-role-banner" id="ai-role-banner">
          <div class="banner-background">
            <img
              src="https://files.catbox.moe/48ttww.png"
              alt="AIè§’è‰²"
              class="banner-character-image"
              id="banner-character-image"
            />
            <div class="banner-overlay"></div>
          </div>
          <div class="banner-content">
            <div class="banner-text">
              <h3 class="banner-title" id="banner-title">MESUGAKI</h3>
            </div>
          </div>
        </div>

        <div class="taste-report-placeholder">
          <i class="fas fa-lightbulb"></i>
          <h4>AIåå¥½åˆ†æ</h4>
          <p>æ·»åŠ ä¸€äº›åŠ¨ç”»åˆ°æ‚¨çš„åˆ†çº§åˆ—è¡¨ï¼Œç„¶åç‚¹å‡»"ç”Ÿæˆæ€»ç»“æŠ¥å‘Š"ï¼Œè®©AIåˆ†ææ‚¨çš„åŠ¨ç”»åå¥½ï¼</p>
          <ul>
            <li>ğŸ¯ ä¸ªæ€§åŒ–åˆ†ææ‚¨çš„åŠ¨ç”»åå¥½</li>
            <li>ğŸ“Š åŸºäºåˆ¶ä½œå…¬å¸ã€å£°ä¼˜ã€æ ‡ç­¾çš„æ·±åº¦è§£æ</li>
            <li>ğŸŒŠ æ”¯æŒæµå¼ä¼ è¾“ï¼Œå®æ—¶æ˜¾ç¤ºç”Ÿæˆè¿‡ç¨‹</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- å¯¼å‡ºå›¾ç‰‡å¯¹è¯æ¡† -->
    <div id="export-image-dialog" class="export-dialog">
      <div class="export-dialog-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <h3 class="export-dialog-title">å¯¼å‡ºä¸ºå›¾ç‰‡</h3>
        <div class="export-dialog-body">
          <div id="export-loading" class="export-loading">
            <div class="spinner"></div>
            <p>æ­£åœ¨ç”Ÿæˆå›¾ç‰‡ï¼Œè¯·ç¨å€™...</p>
          </div>
          <img id="export-preview" class="export-preview" src="" alt="é¢„è§ˆ" style="display: none" />
        </div>
        <div class="export-dialog-actions">
          <button id="download-image-btn" class="export-dialog-btn primary">
            <i class="fas fa-download"></i>
            <span>ä¸‹è½½å›¾ç‰‡</span>
          </button>
        </div>
      </div>
    </div>

    <!-- åˆ†äº«é“¾æ¥å¯¹è¯æ¡† -->
    <div id="share-link-dialog" class="export-dialog">
      <div class="export-dialog-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <h3 class="export-dialog-title">åˆ†äº«é“¾æ¥</h3>
        <div class="export-dialog-body">
          <p>å¤åˆ¶ä»¥ä¸‹é“¾æ¥åˆ†äº«ä½ çš„Tier Listï¼š</p>
          <input type="text" id="share-link-input" class="share-link-input" readonly />
        </div>
        <div class="export-dialog-actions">
          <button id="copy-link-btn" class="export-dialog-btn primary">
            <i class="fas fa-copy"></i>
            <span>å¤åˆ¶é“¾æ¥</span>
          </button>
        </div>
      </div>
    </div>

    <!-- å¯¼å…¥ç¡®è®¤å¯¹è¯æ¡† -->
    <div id="import-confirm-dialog" class="export-dialog">
      <div class="export-dialog-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <h3 class="export-dialog-title">å¯¼å…¥æ•°æ®</h3>
        <div class="export-dialog-body">
          <p>å¯¼å…¥å°†è¦†ç›–å½“å‰çš„æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ</p>
        </div>
        <div class="export-dialog-actions">
          <button id="cancel-import-btn" class="export-dialog-btn">
            <i class="fas fa-times"></i>
            <span>å–æ¶ˆ</span>
          </button>
          <button id="confirm-import-btn" class="export-dialog-btn primary">
            <i class="fas fa-check"></i>
            <span>ç¡®è®¤å¯¼å…¥</span>
          </button>
        </div>
      </div>
    </div>

    <!-- æ€»ç»“æŠ¥å‘Šå¯¹è¯æ¡† -->
    <div
      id="taste-report-dialog"
      class="export-dialog"
      role="dialog"
      aria-modal="true"
      aria-labelledby="taste-report-title"
    >
      <div class="export-dialog-content">
        <button class="export-dialog-close" aria-label="å…³é—­æ€»ç»“æŠ¥å‘Šå¯¹è¯æ¡†"><i class="fas fa-times"></i></button>
        <h3 id="taste-report-title" class="export-dialog-title">æ‚¨çš„åŠ¨ç”»æ€»ç»“æŠ¥å‘Š</h3>
        <div id="taste-report-body" class="export-dialog-body">
          <!-- åˆå§‹çŠ¶æ€ -->
          <div class="taste-report-setup">
            <div class="api-key-section">
              <h4><i class="fas fa-key"></i> API å¯†é’¥è®¾ç½®</h4>
              <p class="api-key-description">éœ€è¦ Google Gemini API å¯†é’¥æ¥ç”Ÿæˆæ€»ç»“æŠ¥å‘Šã€‚</p>
              <div class="api-key-security-notice">
                <i class="fas fa-shield-alt"></i>
                <span>æ‚¨çš„APIå¯†é’¥ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</span>
              </div>
              <div class="api-key-input-group">
                <input
                  type="password"
                  id="gemini-api-key"
                  class="api-key-input"
                  placeholder="è¯·è¾“å…¥æ‚¨çš„ Gemini API å¯†é’¥"
                />
                <button
                  type="button"
                  id="toggle-api-key-visibility"
                  class="toggle-visibility-btn"
                  title="æ˜¾ç¤º/éšè—å¯†é’¥"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="api-key-actions">
                <button id="save-api-key-btn" class="api-key-btn primary">
                  <i class="fas fa-save"></i>
                  <span>ä¿å­˜å¯†é’¥</span>
                </button>
                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-key-btn secondary">
                  <i class="fas fa-external-link-alt"></i>
                  <span>è·å–å…è´¹APIå¯†é’¥</span>
                </a>
              </div>
              <div class="api-key-help">
                <details>
                  <summary><i class="fas fa-question-circle"></i> å¦‚ä½•è·å–APIå¯†é’¥ï¼Ÿ</summary>
                  <ol>
                    <li>ç‚¹å‡»ä¸Šæ–¹"è·å–å…è´¹APIå¯†é’¥"é“¾æ¥</li>
                    <li>ä½¿ç”¨Googleè´¦å·ç™»å½•</li>
                    <li>ç‚¹å‡»"Create API Key"åˆ›å»ºå¯†é’¥</li>
                    <li>å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥å¹¶ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†</li>
                    <li>ç‚¹å‡»"ä¿å­˜å¯†é’¥"å®Œæˆè®¾ç½®</li>
                  </ol>
                </details>
              </div>
            </div>
            <div class="generate-report-section" style="display: none">
              <h4><i class="fas fa-brain"></i> ç”Ÿæˆæ€»ç»“æŠ¥å‘Š</h4>
              <p>AI å°†åˆ†ææ‚¨çš„ Tier List ä¸­çš„åŠ¨ç”»ï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„æ€»ç»“æŠ¥å‘Šã€‚</p>
              <button id="start-analysis-btn" class="start-analysis-btn">
                <i class="fas fa-magic"></i>
                <span>å¼€å§‹åˆ†ææˆ‘çš„åå¥½</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- éšè—æŸ¥çœ‹å®Œæ•´Promptå¯¹è¯æ¡†åŠŸèƒ½ -->
    <!--
    <div id="view-prompt-dialog" class="export-dialog">
      <div class="export-dialog-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <h3 class="export-dialog-title">å®Œæ•´LLM Prompt</h3>
        <div class="export-dialog-body">
          <div class="prompt-content">
            <pre id="prompt-text" class="prompt-text"></pre>
          </div>
        </div>
        <div class="export-dialog-actions">
          <button id="copy-prompt-btn" class="export-dialog-btn primary">
            <i class="fas fa-copy"></i>
            <span>å¤åˆ¶Prompt</span>
          </button>
        </div>
      </div>
    </div>
    -->

    <!-- åŠ¨ç”»è¯¦æƒ…å¯¹è¯æ¡† -->
    <div id="anime-detail-dialog" class="export-dialog">
      <div class="export-dialog-content anime-detail-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <div class="anime-detail-header">
          <div class="anime-detail-cover">
            <img id="detail-cover" src="" alt="å°é¢" />
          </div>
          <div class="anime-detail-info">
            <h3 id="detail-title" class="anime-detail-title"></h3>
            <h4 id="detail-title-cn" class="anime-detail-title-cn"></h4>
            <div class="anime-detail-meta">
              <div class="meta-item">
                <span class="meta-label"><i class="fas fa-calendar-alt"></i> æ”¾é€æ—¥æœŸ:</span>
                <span id="detail-air-date" class="meta-value"></span>
              </div>
              <div class="meta-item">
                <span class="meta-label"><i class="fas fa-star"></i> è¯„åˆ†:</span>
                <span id="detail-rating" class="meta-value"></span>
              </div>
              <div class="meta-item">
                <span class="meta-label"><i class="fas fa-list-ol"></i> æ’å:</span>
                <span id="detail-rank" class="meta-value"></span>
              </div>
              <div class="meta-item">
                <span class="meta-label"><i class="fas fa-film"></i> é›†æ•°:</span>
                <span id="detail-eps" class="meta-value"></span>
              </div>
            </div>
            <div class="anime-detail-tags" id="detail-tags"></div>
          </div>
        </div>
        <div class="anime-detail-body">
          <div class="detail-section">
            <h4 class="detail-section-title"><i class="fas fa-info-circle"></i> ç®€ä»‹</h4>
            <div id="detail-summary" class="detail-section-content"></div>
          </div>
          <div class="detail-section">
            <h4 class="detail-section-title"><i class="fas fa-building"></i> åˆ¶ä½œä¿¡æ¯</h4>
            <div id="detail-infobox" class="detail-section-content"></div>
          </div>
        </div>
        <div class="anime-detail-actions">
          <a id="detail-bgm-link" href="#" target="_blank" class="export-dialog-btn secondary">
            <i class="fas fa-external-link-alt"></i>
            <span>åœ¨Bangumiä¸ŠæŸ¥çœ‹</span>
          </a>
        </div>
      </div>
    </div>

    <!-- å³é”®èœå• -->
    <div id="context-menu" class="context-menu">
      <div class="context-menu-item" id="edit-option">
        <i class="fas fa-edit"></i>
        <span>ç¼–è¾‘</span>
      </div>
      <div class="context-menu-item" id="detail-option">
        <i class="fas fa-info-circle"></i>
        <span>æŸ¥çœ‹è¯¦æƒ…</span>
      </div>
      <div class="context-menu-item" id="delete-option">
        <i class="fas fa-trash"></i>
        <span>åˆ é™¤</span>
      </div>
      <div class="context-menu-divider"></div>
      <div class="context-menu-item" id="add-comment-option">
        <i class="fas fa-comment-medical"></i>
        <span>æ·»åŠ è¯„è®º</span>
      </div>
    </div>

    <!-- è¯„è®ºå¯¹è¯æ¡† -->
    <div id="comment-dialog" class="export-dialog">
      <div class="export-dialog-content">
        <button class="export-dialog-close"><i class="fas fa-times"></i></button>
        <h3 class="export-dialog-title">æ·»åŠ è¯„è®º</h3>
        <div class="export-dialog-body">
          <div class="comment-dialog-header">
            <div class="comment-dialog-cover">
              <img id="comment-anime-cover" src="" alt="åŠ¨ç”»å°é¢" />
              <h4 id="comment-anime-title" class="comment-dialog-title"></h4>
            </div>
          </div>
          <div class="comment-input-container">
            <label for="comment-text">ä½ çš„è¯„è®º:</label>
            <textarea id="comment-text" class="comment-textarea" placeholder="å†™ä¸‹ä½ å¯¹è¿™éƒ¨åŠ¨ç”»çš„æƒ³æ³•..."></textarea>
          </div>
          <div class="comment-style-selector">
            <label>è¯„è®ºæ ·å¼:</label>
            <div class="comment-style-container">
              <div class="comment-style-option" data-style="1">
                <i class="fas fa-columns"></i>
                <span>å³ä¾§å›¾ç‰‡</span>
              </div>
              <div class="comment-style-option" data-style="2">
                <i class="fas fa-image"></i>
                <span>å¤§å›¾é¡¶éƒ¨</span>
              </div>
              <div class="comment-style-option" data-style="3">
                <i class="fas fa-layer-group"></i>
                <span>èƒŒæ™¯è¦†ç›–</span>
              </div>
              <div class="comment-style-option" data-style="4">
                <i class="fas fa-id-card"></i>
                <span>å¡ç‰‡å¼</span>
              </div>
              <div class="comment-style-option random-style active" data-style="random">
                <i class="fas fa-random"></i>
                <span>éšæœºæ ·å¼</span>
              </div>
            </div>
          </div>
        </div>
        <div class="export-dialog-actions">
          <button id="cancel-comment-btn" class="export-dialog-btn">
            <i class="fas fa-times"></i>
            <span>å–æ¶ˆ</span>
          </button>
          <button id="save-comment-btn" class="export-dialog-btn primary">
            <i class="fas fa-save"></i>
            <span>ä¿å­˜è¯„è®º</span>
          </button>
        </div>
      </div>
    </div>

    <!-- é¡µé¢å£°æ˜ -->
    <footer class="page-footer">
      <div class="footer-content">
        <a href="https://github.com/ikemenrourou" target="_blank">@ikemenrourou</a>
        <a href="https://github.com/ikemenrourou/BGM-AniTier" target="_blank">GitHub</a>
        <span>åŠ¨ç”»ä¿¡æ¯æ¥è‡ª <a href="https://bgm.tv/" target="_blank">ç•ªç»„è®¡åˆ’</a></span>
        <span>æœç´¢åŠŸèƒ½å‚è€ƒ <a href="https://github.com/itorr/anime-grid" target="_blank">anime-grid</a></span>
        <span class="usage-notice">ä»…ä¾›ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œç¦æ­¢å•†ä¸šç”¨é€”</span>
      </div>
    </footer>
  </body>
</html>
